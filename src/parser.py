""" Parse RFCOMM response from Spark."""

from typing import List

class Response(object):
    def __init__(self, messages: List[]):
        self.messages = messages[:]

    def parse(self):
        submessage = b''
        for item in messages:
            # skip item[0:5]
            mesaage_len = item[6]
            if len(item) != message_len:
                print('oops')
                return None
            submessage += item[0x10:]
        print(bytes.hex(submessage))
if __name__ == '__main__':
    test_message = []
    test_message.append(bytes.fromhex('01fe000041ff6a000000000000000000f00101350301200f001900005924003930393063333100632d613833342d00346333332d3961f7f00101300301000f011931642d330035313939393965103166313627312d20436c65616e2330f7f001016a0301600f02192e37'))
    test_message.append(bytes.fromhex('001fe000041ff6a00000000000000000020280069636f6e2e706e4a674a4270000017012e626961732e6ef7f001011f0301000f03196f69736530676174654213003b114a3d756e43011b114a3e292f1202f7f001014d0301180f0419114a00000400002a436f6d704072'))
    test_message.append(bytes.fromhex('001fe000041ff6a0000000000000000006573736f72426d1200114a3e2a3bf7f00101250301680f05191001114a143f7f474b27426f606f7374657242110600114a3f0f1f78f7f00101560301080f06192841432060426f6f737443156600114a3e7d73365601114a3e1c'))
    test_message.append(bytes.fromhex('001fe000041ff6a0000000000000000000123f7f00101160301300f071902114a3f300f5c2903114a3e3679736804114a3f0c3972662c43686ff7f00101500301000f081972757341606e616c6f6742145600114a3e4115321601114a3f000000f7f001011e0301300f09'))
    test_message.append(bytes.fromhex('001fe000041ff6a0000000000000000001902114a3e345d494403114a3e090000002944656c4061794d6f6e6f42f7f001012c0301680f0a191500114a600000000001114a6c3e6e246102114a623e7b245703114af7f00101030301400f0b193f1b556a1604114a3f0000'))
    test_message.append(bytes.fromhex('001fe000041ff6a00000000000000000000012b626961732e726065766572624218f7f00101100301300f0c1900114a3c3341030601114a3e3728193b02114a3e3760173203114a3ef7f00101610301180f0d191b4d36043b114a3e79797a051b114a3e6e4a38063b114a'))
    test_message.append(bytes.fromhex('001fe000041ff290000000000000000003e19191a07f7f001013b0301180f0e07114a00000400007af7'))
    r = Response(test_message)
    r.parse()
